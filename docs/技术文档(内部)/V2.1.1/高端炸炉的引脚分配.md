# 基于ESP32-S3的高端炸炉的引脚分配

***更新于2023.6.13 11：30***

## esp32的引脚(警告：7寸屏有一引脚RS/DC未接入引脚，已纠正)

| GPIO   | Analog Function | RTC GPIO   | Comment                  |
| ------ | --------------- | ---------- | ------------------------ |
| GPIO0  |                 | RTC_GPIO0  | Strapping pin（可用）        |
| GPIO1  | ADC1_CH0        | RTC_GPIO1  | **温度探头**                 |
| GPIO2  | ADC1_CH1        | RTC_GPIO2  | **7寸屏RS/DC**             |
| GPIO3  | ADC1_CH2        | RTC_GPIO3  | Strapping pin/**7寸屏D12** |
| GPIO4  | ADC1_CH3        | RTC_GPIO4  | **继电器K9**                |
| GPIO5  | ADC1_CH4        | RTC_GPIO5  | **74HC165移位寄存器Qh**       |
| GPIO6  | ADC1_CH5        | RTC_GPIO6  | **74HC165移位寄存器CLK**      |
| GPIO7  | ADC1_CH6        | RTC_GPIO7  | **74HC165移位寄存器SH/LD**    |
| GPIO8  | ADC1_CH7        | RTC_GPIO8  | **7寸屏D13**               |
| GPIO9  | ADC1_CH8        | RTC_GPIO9  | **7寸屏RST**               |
| GPIO10 | ADC1_CH9        | RTC_GPIO10 | **7寸屏INT**               |
| GPIO11 | ADC2_CH0        | RTC_GPIO11 | **7寸屏WAIT**              |
| GPIO12 | ADC2_CH1        | RTC_GPIO12 | **7寸屏SCL**               |
| GPIO13 | ADC2_CH2        | RTC_GPIO13 | **7寸屏SDA**               |
| GPIO14 | ADC2_CH3        | RTC_GPIO14 | **蜂鸣器**                  |
| GPIO15 | ADC2_CH4        | RTC_GPIO15 | **旋钮引脚A**                |
| GPIO16 | ADC2_CH5        | RTC_GPIO16 | **旋钮引脚B**                |
| GPIO17 | ADC2_CH6        | RTC_GPIO17 | **7寸屏D15**               |
| GPIO18 | ADC2_CH7        | RTC_GPIO18 | **7寸屏D14**               |
| GPIO19 | ADC2_CH8        | RTC_GPIO19 | USB-JTAG（烧程序）            |
| GPIO20 | ADC2_CH9        | RTC_GPIO20 | USB-JTAG（烧程序）            |
| GPIO21 |                 | RTC_GPIO21 | **7寸屏D11**               |
| GPIO26 |                 |            | SPI0/1（无引脚）              |
| GPIO27 |                 |            | SPI0/1（无引脚）              |
| GPIO28 |                 |            | SPI0/1（无引脚）              |
| GPIO29 |                 |            | SPI0/1（无引脚）              |
| GPIO30 |                 |            | SPI0/1（无引脚）              |
| GPIO31 |                 |            | SPI0/1（无引脚）              |
| GPIO32 |                 |            | SPI0/1（无引脚）              |
| GPIO33 |                 |            | SPI0/1（无引脚）              |
| GPIO34 |                 |            | SPI0/1（无引脚）              |
| GPIO35 |                 |            | SPI0/1/**7寸屏D7**         |
| GPIO36 |                 |            | SPI0/1/**7寸屏D6**         |
| GPIO37 |                 |            | SPI0/1/**7寸屏D5**         |
| GPIO38 |                 |            | **7寸屏D4**                |
| GPIO39 |                 |            | **7寸屏D3**                |
| GPIO40 |                 |            | **7寸屏D2**                |
| GPIO41 |                 |            | **7寸屏D1**                |
| GPIO42 |                 |            | **7寸屏D0**                |
| GPIO43 |                 |            | （无引脚）                    |
| GPIO44 |                 |            | （无引脚）                    |
| GPIO45 |                 |            | Strapping pin/**7寸屏D8**  |
| GPIO46 |                 |            | Strapping pin/**7寸屏WR**  |
| GPIO47 |                 |            | **7寸屏D10**               |
| GPIO48 |                 |            | **7寸屏D9**                |

开发板芯片总引脚：40个（含地、电源），开发板排针上的总引脚：44个（含地、电源）。

总计保险可用引脚：25个，GPIO1、2、4~18、21、38~42、47、48（43、44无引脚）。

总计极限可用引脚：32个，GPIO0~18、21、35~42、45~48（含SPI0/1、Strapping pin）。

除了上述被7寸屏占用的23个引脚外，极限使用还有GPIO0、1、4~7、14~16共9个引脚可用。

### 74HC165移位寄存器

移位寄存器A、B、C位（移位寄存器上第11~13位）分别用于光耦P5、光耦P6、光耦P7 、上按键、下按键、返回按键和确定按键共7个输入。

### 7寸屏

***注意：***除了上述所接的连接GPIO的7寸屏引脚外，7寸屏的CS、PS脚需接地，RD脚需接3V3，***否则7寸屏不会出现理想的效果***。

### 剩余9个引脚的分配

#### 单独接IO口

| 功能             | 引脚占用数     |
| -------------- | --------- |
| **温度探头（ADC）**  | 1（GPIO1）  |
| **继电器K9（ADC）** | 1（GPIO4）  |
| **旋钮A**        | 1（GPIO15） |
| **旋钮B**        | 1（GPIO16） |
| **蜂鸣器**        | 1（GPIO14） |
| **总计**         | 5         |

#### 连接到74HC165

| 功能       | 引脚占用数      |
| -------- | ---------- |
| **光耦P5** |            |
| **光耦P6** |            |
| **光耦P7** |            |
| **上按键**  |            |
| **下按键**  |            |
| **返回按键** |            |
| **确定按键** |            |
| **总计**   | 3（GPIO5~7） |

#### 3个光耦对应的功能

| 光耦P5 | 光耦P6 | 光耦P7 | 功能  |
| ---- | ---- | ---- | --- |
| LOW  | LOW  | HIGH | 倾斜  |
| LOW  | HIGH | HIGH | 泄油  |
| HIGH | HIGH | HIGH | 超温  |

***剩余引脚：GPIO0***

## 出于对总体复杂度的考虑，对电子版设计的想法

原想法：一台炸炉有两侧。一侧是双缸，用1块电子版控制；另一侧是单缸，也是用1块电子版控制。

当前想法：双缸用2块电子版控制，也就是说，双缸的每个缸都视为单缸使用。

## 按键

按原来炸炉的按键设计，需要涉及的相关按键，电源开关，加热开关，滤油开关，显温开关，10个频道开关，2个泄油开关，马达开关，双缸2个加热管倾斜开关和单缸加热管倾斜开关。以上按键功能仅是预测。

## 未来的引脚

### 待定
