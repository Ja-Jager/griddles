# 基于ESP32-S3的高端炸炉的引脚分配

***更新于2023.2.11 16：30***



## esp32的引脚(警告：7寸屏有一引脚RS/DC未接入引脚)

| GPIO   | Analog Function | RTC GPIO   | Comment                             |
| ------ | --------------- | ---------- | ----------------------------------- |
| GPIO0  |                 | RTC_GPIO0  | Strapping pin（可用）/**超温保护**  |
| GPIO1  | ADC1_CH0        | RTC_GPIO1  | **温度探头**                        |
| GPIO2  | ADC1_CH1        | RTC_GPIO2  | **连接光耦P5的温控引脚**            |
| GPIO3  | ADC1_CH2        | RTC_GPIO3  | Strapping pin/**7寸屏D7**           |
| GPIO4  | ADC1_CH3        | RTC_GPIO4  | **蜂鸣器/（7寸屏RS/DC）**           |
| GPIO5  | ADC1_CH4        | RTC_GPIO5  | **与超温保护、加热有关的继电K9**    |
| GPIO6  | ADC1_CH5        | RTC_GPIO6  | **与超温保护、加热有关的继电器K10** |
| GPIO7  | ADC1_CH6        | RTC_GPIO7  | **与超温保护、加热有关的继电器K11** |
| GPIO8  | ADC1_CH7        | RTC_GPIO8  | **7寸屏D6**                         |
| GPIO9  | ADC1_CH8        | RTC_GPIO9  | **7寸屏D5**                         |
| GPIO10 | ADC1_CH9        | RTC_GPIO10 | **7寸屏D2**                         |
| GPIO11 | ADC2_CH0        | RTC_GPIO11 | **7寸屏D3**                         |
| GPIO12 | ADC2_CH1        | RTC_GPIO12 | **7寸屏D0**                         |
| GPIO13 | ADC2_CH2        | RTC_GPIO13 | **7寸屏D1**                         |
| GPIO14 | ADC2_CH3        | RTC_GPIO14 | **ADC按键**                         |
| GPIO15 | ADC2_CH4        | RTC_GPIO15 | **旋钮引脚A**                       |
| GPIO16 | ADC2_CH5        | RTC_GPIO16 | **旋钮引脚B**                       |
| GPIO17 | ADC2_CH6        | RTC_GPIO17 | **7寸屏D8**                         |
| GPIO18 | ADC2_CH7        | RTC_GPIO18 | **7寸屏D9**                         |
| GPIO19 | ADC2_CH8        | RTC_GPIO19 | USB-JTAG（烧程序）                  |
| GPIO20 | ADC2_CH9        | RTC_GPIO20 | USB-JTAG（烧程序）                  |
| GPIO21 |                 | RTC_GPIO21 | **7寸屏SCL**                        |
| GPIO26 |                 |            | SPI0/1（无引脚）                    |
| GPIO27 |                 |            | SPI0/1（无引脚）                    |
| GPIO28 |                 |            | SPI0/1（无引脚）                    |
| GPIO29 |                 |            | SPI0/1（无引脚）                    |
| GPIO30 |                 |            | SPI0/1（无引脚）                    |
| GPIO31 |                 |            | SPI0/1（无引脚）                    |
| GPIO32 |                 |            | SPI0/1（无引脚）                    |
| GPIO33 |                 |            | SPI0/1（无引脚）                    |
| GPIO34 |                 |            | SPI0/1（无引脚）                    |
| GPIO35 |                 |            | SPI0/1/**7寸屏RST**                 |
| GPIO36 |                 |            | SPI0/1/**7寸屏WR**                  |
| GPIO37 |                 |            | SPI0/1/**7寸屏D14**                 |
| GPIO38 |                 |            | **7寸屏D15**                        |
| GPIO39 |                 |            | **7寸屏D12**                        |
| GPIO40 |                 |            | **7寸屏D13**                        |
| GPIO41 |                 |            | **7寸屏D10**                        |
| GPIO42 |                 |            | **7寸屏D11**                        |
| GPIO43 |                 |            | （无引脚）                          |
| GPIO44 |                 |            | （无引脚）                          |
| GPIO45 |                 |            | Strapping pin/**7寸屏INT**          |
| GPIO46 |                 |            | Strapping pin/**7寸屏D4**           |
| GPIO47 |                 |            | **7寸屏SDA**                        |
| GPIO48 |                 |            | **7寸屏WAIT**                       |

开发板芯片总引脚：40个（含地、电源），开发板排针上的总引脚：44个（含地、电源）。

总计保险可用引脚：25个，GPIO1、2、4~18、21、38~42、47、48（43、44无引脚）。

总计极限可用引脚：32个，GPIO0~18、21、35~42、45~48（含SPI0/1、Strapping pin）。

除了上述被7寸屏占用的22个引脚外，极限使用还有GPIO0、14、21、35~37、40、45、47、48共10个引脚可用。





### 出于对总体复杂度的考虑，对电子版设计的想法

原想法：一台炸炉有两侧。一侧是双缸，用1块电子版控制；另一侧是单缸，也是用1块电子版控制。

当前想法：双缸用2块电子版控制，也就是说，双缸的每个缸都视为单缸使用。



### 剩余10个引脚的分配

#### 加热管、测温、泄油的分配

由于炸炉有单缸、双缸之分，但每块电子板只能控制单缸或者双缸，所以，对于双缸而言，加热管、测温、泄油最少都占用2个引脚，共6个引脚。对于单缸而言，就是占用双缸占用引脚数的一半。***（测温方面还需再考虑是用MAX6675还是热敏电阻温度探头）***

#### 超温保护的分配

双缸分配2个引脚用于超温保护，单缸分配1个。

#### 蜂鸣器的分配

不管单缸、双缸，只分配1个引脚给蜂鸣器。

#### 按键的分配

双缸方案下，将仅剩的最后1个引脚分配给ADC按键。

#### 旋钮的分配

采用单缸设计方案，分配2个引脚用于旋钮。

#### 总计

双缸10个全用***（出于总体复杂度的考虑，对电子版设计的想法（上文），先不采用双缸方案来分配引脚）***

单缸8个








## 当前功能所需要用到的引脚

| 功能 | 引脚数量 |
| ---- | -------- |
|7寸屏|20|
|按键|1**（GPIO14（ADC））**|
|蜂鸣器|1|
|超温保护|？|
|继电器|**8**|
|感温探头|2|
|总计|32**（超过上限27个）**|



## 按键

因为引脚只剩下GPIO14一个可以使用ADC的引脚，所以只有GPIO14可以胜任。

按原来炸炉的按键设计，需要涉及的相关按键，电源开关，加热开关，滤油开关，显温开关，10个频道开关，2个泄油开关，马达开关，双缸2个加热管倾斜开关和单缸加热管倾斜开关。

解决方案：将7寸屏的一些占用到ADC引脚替换成通用GPIO口，空出的ADC引脚就能分担上述的按键。




## 未来的引脚


### 待定





